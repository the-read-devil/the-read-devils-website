(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const e of r)if(e.type==="childList")for(const d of e.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function t(r){const e={};return r.integrity&&(e.integrity=r.integrity),r.referrerPolicy&&(e.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?e.credentials="include":r.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function n(r){if(r.ep)return;r.ep=!0;const e=t(r);fetch(r.href,e)}})();document.getElementById("year").textContent=new Date().getFullYear().toString();const a=document.querySelector(".nav-toggle"),f=document.getElementById("primary-menu");if(a&&f){const o=window.matchMedia("(max-width: 1200px)"),i=()=>{const e=o.matches,d=a.getAttribute("aria-expanded")==="true";e?document.body.classList.toggle("menu-open",d):(a.setAttribute("aria-expanded","false"),a.setAttribute("aria-label","Open menu"),document.body.classList.remove("menu-open"))},t=e=>{e.key==="Escape"&&a.getAttribute("aria-expanded")==="true"&&(a.setAttribute("aria-expanded","false"),a.setAttribute("aria-label","Open menu"),i(),a.focus())};a.setAttribute("aria-expanded","false"),a.setAttribute("aria-label","Open menu"),f.setAttribute("aria-hidden","true"),i();const n=()=>{const e=o.matches,d=a.getAttribute("aria-expanded")==="true";f.setAttribute("aria-hidden",String(e?!d:!1));try{f.inert=e?!d:!1}catch{}};a.addEventListener("click",()=>{const e=a.getAttribute("aria-expanded")==="true";a.setAttribute("aria-expanded",String(!e)),a.setAttribute("aria-label",e?"Open menu":"Close menu"),i(),n()}),o.addEventListener("change",i),document.addEventListener("keydown",t);const r=document.querySelector('nav[aria-label="Primary"]');document.addEventListener("click",e=>{!o.matches||!(a.getAttribute("aria-expanded")==="true")||r&&!r.contains(e.target)&&(a.setAttribute("aria-expanded","false"),a.setAttribute("aria-label","Open menu"),i())}),f.querySelectorAll("a").forEach(e=>{e.addEventListener("click",()=>{a.setAttribute("aria-expanded","false"),a.setAttribute("aria-label","Open menu"),i(),n()})}),n()}const b=document.querySelector(".hero"),y=document.querySelector("#invite"),w=document.querySelector("nav .menu-items .btn");if(window.IntersectionObserver&&w&&(b||y)){let o=!1,i=!1;const t=()=>{const r=o||i;w.style.display=r?"none":""},n=new IntersectionObserver(r=>{r.forEach(e=>{e.target===b&&(o=e.isIntersecting),e.target===y&&(i=e.isIntersecting)}),t()},{threshold:.2});b&&n.observe(b),y&&n.observe(y)}const x=window.matchMedia("(prefers-reduced-motion: reduce)").matches;x&&(document.documentElement.style.scrollBehavior="auto");document.querySelectorAll('a[href^="#"]').forEach(o=>{o.addEventListener("click",i=>{const t=o.getAttribute("href");try{const n=t&&t!=="#"?document.querySelector(t):null;n&&(n.setAttribute("tabindex","-1"),n.addEventListener("blur",()=>n.removeAttribute("tabindex"),{once:!0}),x||(i.preventDefault(),n.scrollIntoView({behavior:"smooth",block:"start"}),n.focus({preventScroll:!0})))}catch{}})});const h=document.querySelector(".hero"),E=document.querySelector(".hero .title-wrap"),g=document.querySelector("header"),L=document.querySelector("main");if(h&&E){let o=0;const i=()=>{const n=Math.round(h.getBoundingClientRect().height);E.style.minHeight=`${n}px`},t=()=>{o&&cancelAnimationFrame(o),o=requestAnimationFrame(i)};t(),window.addEventListener("load",t,{passive:!0}),window.addEventListener("resize",t,{passive:!0}),window.addEventListener("orientationchange",t,{passive:!0}),window.ResizeObserver&&new ResizeObserver(t).observe(h),document.fonts&&document.fonts.ready&&document.fonts.ready.then(t).catch(()=>{})}if(g&&L){let o=0;const i=()=>{const n=Math.round(g.getBoundingClientRect().height);document.documentElement.style.setProperty("--header-h",`${n}px`),L.style.paddingTop=`${n}px`},t=()=>{o&&cancelAnimationFrame(o),o=requestAnimationFrame(i)};t(),window.addEventListener("load",t,{passive:!0}),window.addEventListener("resize",t,{passive:!0}),window.addEventListener("orientationchange",t,{passive:!0}),window.ResizeObserver&&new ResizeObserver(t).observe(g),document.fonts&&document.fonts.ready&&document.fonts.ready.then(t).catch(()=>{})}(()=>{const o="support@thereaddevils.com",i="mailto:support@thereaddevils.com?subject=Request%20Invite%20-%20Read%20Devils&body=Name%3A%0ACity%3A%0AWhy%20I%20want%20to%20join%3A%0AFavorite%20book%20or%20film%3A%0AReferrer%20(if%20any)%3A",t=document.getElementById("invite-modal");if(!t)return;const n=t.querySelector(".modal"),r=t.querySelector(".modal-close"),e=t.querySelector(".btn-copy-email"),d=t.querySelector(".btn-send-email");let p=null;const S=s=>{d.setAttribute("href",s),p=document.activeElement,t.setAttribute("aria-hidden","false"),document.body.classList.add("modal-open"),(e||r||n).focus({preventScroll:!0}),document.addEventListener("keydown",A)},v=()=>{t.setAttribute("aria-hidden","true"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",A),p&&p.focus&&p.focus({preventScroll:!0})},A=s=>{if(s.key==="Escape"&&(s.preventDefault(),v()),s.key==="Tab"){const c=n.querySelectorAll('a[href], button:not([disabled]), [tabindex]:not([tabindex="-1"])');if(c.length===0)return;const u=c[0],m=c[c.length-1];s.shiftKey&&document.activeElement===u?(s.preventDefault(),m.focus()):!s.shiftKey&&document.activeElement===m&&(s.preventDefault(),u.focus())}};document.querySelectorAll(".btn-invite").forEach(s=>{s.addEventListener("click",c=>{c.preventDefault();const u=s.getAttribute("data-mailto")||s.getAttribute("href")||i;S(u)})}),r&&r.addEventListener("click",v),t.addEventListener("click",s=>{s.target===t&&v()}),e&&e.addEventListener("click",async()=>{const s=e.getAttribute("data-email")||o;let c=!1;try{navigator.clipboard&&navigator.clipboard.writeText&&(await navigator.clipboard.writeText(s),c=!0)}catch{}if(!c){const l=document.createElement("textarea");l.value=s,l.setAttribute("readonly",""),l.style.position="absolute",l.style.left="-9999px",document.body.appendChild(l),l.select();try{document.execCommand("copy"),c=!0}catch{}document.body.removeChild(l)}const u=e.innerHTML,m=e.getAttribute("aria-label")||"";e.innerHTML=c?"Copied!":"Copy failed",e.setAttribute("aria-label",c?"Copied!":"Copy failed"),setTimeout(()=>{e.innerHTML=u,m&&e.setAttribute("aria-label",m)},1500)})})();
